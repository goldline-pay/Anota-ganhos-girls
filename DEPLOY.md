# üöÄ Guia Completo de Deploy

Este guia cont√©m instru√ß√µes **passo a passo** para fazer deploy da aplica√ß√£o Anota Ganhos Girls no **Render** e no **Railway**.

---

## üìã Pr√©-requisitos

Antes de come√ßar, voc√™ precisa:

1. ‚úÖ Conta no [GitHub](https://github.com) (gratuita)
2. ‚úÖ Reposit√≥rio `goldline-pay/Anota-ganhos-girls` no GitHub
3. ‚úÖ Conta no [Render](https://render.com) OU [Railway](https://railway.app) (ambas gratuitas)

---

## üé® Op√ß√£o 1: Deploy no Render (RECOMENDADO)

### ‚è±Ô∏è Tempo estimado: 10-15 minutos

### Passo 1: Criar conta no Render

1. Acesse [https://render.com](https://render.com)
2. Clique em **"Get Started"**
3. Fa√ßa login com sua conta GitHub
4. Autorize o Render a acessar seus reposit√≥rios

### Passo 2: Criar banco de dados MySQL

1. No dashboard do Render, clique em **"New +"** (canto superior direito)
2. Selecione **"MySQL"**
3. Preencha os campos:
   - **Name**: `anota-ganhos-db`
   - **Database**: `anota_ganhos_girls`
   - **User**: `root` (ou deixe o padr√£o)
   - **Region**: Escolha **"Frankfurt (EU Central)"** ou a mais pr√≥xima de voc√™
   - **MySQL Version**: Deixe o padr√£o (8.0)
   - **Plan**: Selecione **"Free"** (ou o plano que preferir)
4. Clique em **"Create Database"**
5. ‚è≥ Aguarde 2-3 minutos at√© o banco ser criado (status ficar√° "Available")

### Passo 3: Copiar credenciais do MySQL

1. Clique no banco de dados que acabou de criar
2. V√° at√© a se√ß√£o **"Connections"**
3. **COPIE E SALVE** as seguintes informa√ß√µes (voc√™ vai precisar):
   - **Internal Database URL** (algo como `mysql://root:senha@dpg-xxx.frankfurt-postgres.render.com/anota_ganhos_girls`)
   - **Hostname** (Internal) - exemplo: `dpg-xxx-a.frankfurt-postgres.render.com`
   - **Port** - geralmente `3306`
   - **Database** - `anota_ganhos_girls`
   - **Username** - geralmente `root`
   - **Password** - uma senha aleat√≥ria gerada

‚ö†Ô∏è **IMPORTANTE**: Use o **Internal Hostname**, N√ÉO o External!

### Passo 4: Criar Web Service

1. Volte ao dashboard principal do Render
2. Clique em **"New +"** ‚Üí **"Web Service"**
3. Clique em **"Build and deploy from a Git repository"**
4. Clique em **"Connect account"** se ainda n√£o conectou o GitHub
5. Procure e selecione o reposit√≥rio: **`goldline-pay/Anota-ganhos-girls`**
6. Clique em **"Connect"**

### Passo 5: Configurar o Web Service

Preencha os campos:

- **Name**: `anota-ganhos-girls` (ou o nome que preferir)
- **Region**: Escolha a **mesma regi√£o do banco de dados** (Frankfurt)
- **Branch**: `main` (ou `master`, dependendo do seu repo)
- **Root Directory**: deixe vazio
- **Environment**: **`Node`**
- **Build Command**: `npm install`
- **Start Command**: `npm start`
- **Plan**: Selecione **"Free"** (ou o plano que preferir)

### Passo 6: Adicionar vari√°veis de ambiente

Role a p√°gina at√© a se√ß√£o **"Environment Variables"**

Clique em **"Add Environment Variable"** e adicione **TODAS** as seguintes vari√°veis:

| Key | Value |
|-----|-------|
| `NODE_ENV` | `production` |
| `PORT` | `3000` |
| `JWT_SECRET` | `[GERAR - veja abaixo]` |
| `DB_HOST` | `[hostname interno do MySQL]` |
| `DB_PORT` | `3306` |
| `DB_USER` | `root` (ou o user que voc√™ anotou) |
| `DB_PASSWORD` | `[senha do MySQL que voc√™ anotou]` |
| `DB_NAME` | `anota_ganhos_girls` |

#### Como gerar JWT_SECRET:

**Op√ß√£o A** - Online:
1. Acesse [https://www.uuidgenerator.net/](https://www.uuidgenerator.net/)
2. Copie o UUID gerado
3. Use como JWT_SECRET

**Op√ß√£o B** - Terminal (se tiver Node.js instalado):
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

**Op√ß√£o C** - Senha aleat√≥ria forte:
Use um gerador de senhas para criar uma string de 32+ caracteres

### Passo 7: Criar o servi√ßo

1. Revise todas as configura√ß√µes
2. Clique em **"Create Web Service"** (bot√£o azul no final da p√°gina)
3. ‚è≥ Aguarde o deploy (pode levar 3-5 minutos)
4. Acompanhe o progresso na aba **"Logs"**

### Passo 8: Verificar deploy

Procure estas mensagens nos logs:

```
‚úÖ Banco de dados inicializado com sucesso!
‚úÖ Usu√°rio admin criado: admin@anotaganhos.com / Admin123!
üöÄ Servidor rodando em http://localhost:3000
```

Se vir essas mensagens, **parab√©ns! Deploy conclu√≠do!** üéâ

### Passo 9: Acessar a aplica√ß√£o

1. No topo da p√°gina, voc√™ ver√° a URL do seu app (algo como `https://anota-ganhos-girls.onrender.com`)
2. Clique na URL ou copie e cole no navegador
3. Fa√ßa login com:
   - **Email**: `admin@anotaganhos.com`
   - **Senha**: `Admin123!`
4. **ALTERE A SENHA IMEDIATAMENTE!**

---

## üöÇ Op√ß√£o 2: Deploy no Railway

### ‚è±Ô∏è Tempo estimado: 10-15 minutos

### Passo 1: Criar conta no Railway

1. Acesse [https://railway.app](https://railway.app)
2. Clique em **"Login"**
3. Fa√ßa login com sua conta GitHub
4. Autorize o Railway a acessar seus reposit√≥rios

### Passo 2: Criar novo projeto

1. No dashboard do Railway, clique em **"New Project"**
2. Selecione **"Deploy from GitHub repo"**
3. Procure e selecione: **`goldline-pay/Anota-ganhos-girls`**
4. Clique no reposit√≥rio para selecion√°-lo
5. ‚è≥ O Railway come√ßar√° o deploy automaticamente

### Passo 3: Adicionar banco de dados MySQL

1. No projeto (voc√™ ver√° um card com o nome do repo), clique em **"+ New"**
2. Selecione **"Database"**
3. Selecione **"Add MySQL"**
4. ‚è≥ Aguarde 1-2 minutos at√© o MySQL ser criado
5. Voc√™ ver√° um novo card chamado **"MySQL"**

### Passo 4: Configurar vari√°veis de ambiente

1. Clique no card do **seu reposit√≥rio** (N√ÉO no MySQL)
2. Clique na aba **"Variables"** (no topo)
3. Clique em **"+ New Variable"**

Adicione **TODAS** as seguintes vari√°veis:

| Variable | Value |
|----------|-------|
| `NODE_ENV` | `production` |
| `PORT` | `3000` |
| `JWT_SECRET` | `[GERAR - veja abaixo]` |
| `DB_HOST` | `${{MySQL.MYSQLHOST}}` |
| `DB_PORT` | `${{MySQL.MYSQLPORT}}` |
| `DB_USER` | `${{MySQL.MYSQLUSER}}` |
| `DB_PASSWORD` | `${{MySQL.MYSQLPASSWORD}}` |
| `DB_NAME` | `${{MySQL.MYSQLDATABASE}}` |

‚ö†Ô∏è **ATEN√á√ÉO**: Para as vari√°veis do MySQL, digite **EXATAMENTE** como mostrado acima, incluindo `${{` e `}}`. O Railway substituir√° automaticamente pelos valores corretos.

#### Como gerar JWT_SECRET:

Use uma das op√ß√µes descritas na se√ß√£o do Render acima.

### Passo 5: Gerar dom√≠nio p√∫blico

1. Ainda no card do seu reposit√≥rio, clique na aba **"Settings"**
2. Role at√© a se√ß√£o **"Networking"**
3. Clique em **"Generate Domain"**
4. O Railway gerar√° uma URL p√∫blica (algo como `https://anota-ganhos-girls-production.up.railway.app`)
5. Copie essa URL

### Passo 6: Redeploy (se necess√°rio)

Se voc√™ adicionou as vari√°veis de ambiente **depois** do primeiro deploy:

1. Clique nos **3 pontinhos** no canto superior direito do card do repo
2. Clique em **"Redeploy"**
3. ‚è≥ Aguarde o novo deploy (2-3 minutos)

### Passo 7: Verificar logs

1. Clique no card do seu reposit√≥rio
2. Clique na aba **"Deployments"**
3. Clique no deployment mais recente (o primeiro da lista)
4. Role para baixo para ver os logs

Procure estas mensagens:

```
‚úÖ Banco de dados inicializado com sucesso!
‚úÖ Usu√°rio admin criado: admin@anotaganhos.com / Admin123!
üöÄ Servidor rodando em http://localhost:3000
```

Se vir essas mensagens, **parab√©ns! Deploy conclu√≠do!** üéâ

### Passo 8: Acessar a aplica√ß√£o

1. Acesse a URL que voc√™ gerou no Passo 5
2. Fa√ßa login com:
   - **Email**: `admin@anotaganhos.com`
   - **Senha**: `Admin123!`
3. **ALTERE A SENHA IMEDIATAMENTE!**

---

## üîß Problemas Comuns e Solu√ß√µes

### ‚ùå Erro: "connect ECONNREFUSED" ou "ER_ACCESS_DENIED_ERROR"

**Causa**: Aplica√ß√£o n√£o consegue conectar ao MySQL

**Solu√ß√µes**:

1. **Render**:
   - Verifique se usou o **Internal Hostname** (n√£o External)
   - Confirme que o MySQL est√° "Available" (n√£o "Creating")
   - Verifique se todas as vari√°veis de ambiente est√£o corretas
   - Tente recriar o Web Service

2. **Railway**:
   - Verifique se usou `${{MySQL.VARIAVEL}}` (com cifr√µes e chaves duplas)
   - Confirme que o MySQL est√° rodando (card verde)
   - Fa√ßa um redeploy da aplica√ß√£o
   - Aguarde 2-3 minutos ap√≥s criar o MySQL antes de fazer deploy

### ‚ùå Erro: "Cannot find module" ou "MODULE_NOT_FOUND"

**Causa**: Depend√™ncias n√£o foram instaladas

**Solu√ß√£o**:
1. Verifique se o Build Command est√° correto: `npm install`
2. Verifique se o `package.json` existe no reposit√≥rio
3. Tente fazer um novo deploy (Render) ou redeploy (Railway)

### ‚ùå Erro: "Port already in use" ou "EADDRINUSE"

**Causa**: Conflito de porta (raro em produ√ß√£o)

**Solu√ß√£o**:
1. Verifique se a vari√°vel `PORT` est√° definida
2. No Railway, remova a vari√°vel `PORT` (Railway define automaticamente)
3. No Render, mantenha `PORT=3000`

### ‚ùå Aplica√ß√£o n√£o abre / Erro 503

**Causa**: Deploy falhou ou servidor n√£o iniciou

**Solu√ß√£o**:
1. Verifique os logs para ver o erro espec√≠fico
2. Confirme que todas as vari√°veis de ambiente est√£o definidas
3. Verifique se o banco MySQL est√° rodando
4. Tente fazer um novo deploy

### ‚ùå Admin n√£o consegue fazer login

**Causa**: Usu√°rio admin n√£o foi criado

**Solu√ß√£o**:
1. Verifique os logs para a mensagem "‚úÖ Usu√°rio admin criado"
2. Se n√£o aparecer, pode haver erro de conex√£o com o banco
3. Verifique as credenciais do MySQL
4. Tente fazer redeploy
5. Use exatamente: `admin@anotaganhos.com` / `Admin123!`

---

## ‚úÖ Checklist Final

Ap√≥s o deploy, verifique:

- [ ] Aplica√ß√£o abre no navegador
- [ ] Login admin funciona
- [ ] Consegue criar uma anota√ß√£o
- [ ] Consegue ver estat√≠sticas
- [ ] Consegue iniciar um "top"
- [ ] Painel admin acess√≠vel
- [ ] Senha do admin foi alterada

---

## üìû Precisa de Ajuda?

1. **Verifique os logs** - 90% dos problemas aparecem l√°
2. **Consulte o README.md** - Se√ß√£o "Troubleshooting"
3. **Abra uma issue no GitHub** - Descreva o problema e cole os logs
4. **Entre em contato** - suporte@anotaganhos.com

---

## üéâ Deploy Conclu√≠do!

Se chegou at√© aqui e tudo funcionou, **parab√©ns!** üéä

Sua aplica√ß√£o est√° no ar e pronta para uso!

**Pr√≥ximos passos recomendados:**
1. ‚úÖ Alterar senha do admin
2. ‚úÖ Criar usu√°rios de teste
3. ‚úÖ Testar todas as funcionalidades
4. ‚è≥ Configurar dom√≠nio personalizado (opcional)
5. ‚è≥ Configurar backups autom√°ticos (opcional)
6. ‚è≥ Adicionar monitoramento (opcional)

---

**√öltima atualiza√ß√£o:** Outubro 2024  
**Vers√£o:** 2.0.0

